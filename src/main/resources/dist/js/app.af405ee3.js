(function(t){function e(e){for(var r,s,o=e[0],c=e[1],u=e[2],p=0,l=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&l.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(e);while(l.length)l.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},a={app:0},i=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var d=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"createThread"},[n("a",{attrs:{href:"#"},on:{click:function(e){return t.openInputForm("new")}}},[n("h3",[t._v(" Create new thread")])])]),n("div",{staticClass:"container",attrs:{id:"hs"}},[n("img",{staticClass:"imgBig",attrs:{src:t.bigImg,onclick:"this.parentElement.style.display='none'"}})]),n("div",{attrs:{id:"hide"}},[n("InputForm",{attrs:{tid:t.tid,text:t.text},on:{"submit-button":t.openThread}})],1),""===t.tid?n("p",t._l(t.threads,(function(e){return n("Thread",{key:e,attrs:{tid:e,server:t.server,id:e,show:!0},on:{"click-on-image":t.showBigImage,answer:t.openInputForm,"open-thread":t.openThread}})})),1):n("p",[n("a",{attrs:{href:"#"},on:{click:t.back}},[t._v("Back")]),t._v(" | Thread: "+t._s(t.tid)+" | "),n("a",{attrs:{href:"#"},on:{click:t.openInputForm}},[t._v("Answer")]),t._v(" | "),n("a",{attrs:{href:"#"},on:{click:t.update}},[t._v("Update")]),t._v(" | "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.autoUpd,expression:"autoUpd"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.autoUpd)?t._i(t.autoUpd,null)>-1:t.autoUpd},on:{change:function(e){var n=t.autoUpd,r=e.target,a=!!r.checked;if(Array.isArray(n)){var i=null,s=t._i(n,i);r.checked?s<0&&(t.autoUpd=n.concat([i])):s>-1&&(t.autoUpd=n.slice(0,s).concat(n.slice(s+1)))}else t.autoUpd=a}}}),t._v("Autoupdate "+t._s(t.timer)+" "),n("Thread",{key:t.updKey,attrs:{tid:t.tid,server:t.server,id:t.tid,show:!1},on:{"click-on-image":t.showBigImage,answer:t.openInputForm,"open-thread":t.openThread}})],1)])},i=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"inputForm",attrs:{id:"inputForm"}},[n("h3",[t._v("Current thread: "+t._s(t.tid)+" ")]),n("a",{staticClass:"x",on:{click:t.resetInputForm}},[t._v("x")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],attrs:{placeholder:"email",type:"text"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),n("br"),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{id:"message",placeholder:"Text..."},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._v(" "),n("br"),n("input",{ref:"images",staticClass:"input-file",attrs:{accept:"image/*",type:"file"},on:{change:t.processFiles}}),n("button",{on:{click:t.submit}},[t._v("Send")])])},o=[],c=(n("b0c0"),n("db8f")),u=n.n(c),d={methods:{checkResponse:function(t){var e=JSON.parse(t);return""!==e.error&&(alert(e.error),!0)},server:function(){return"http://"+window.location.host}}},p={mixins:[d],name:"InputForm",props:["tid","text"],data:function(){return{form:{id:"1",tid:"1",epoch:"1",email:"",images:[],text:""},image:""}},methods:{processFiles:function(){this.image=this.$refs.images.files[0]},submit:function(){var t=this;if(this.form.text=this.text,""!==this.image){var e=new FormData;e.append("files",this.image),u.a.ajax({url:this.server()+"/api/images",method:"POST",body:e},(function(e,n){if(!t.checkResponse(n)){var r=JSON.parse(n).response[0].name;t.image=r,t.form.images.push(t.image);var a="data="+JSON.stringify(t.form);t.sendThreadData(a)}}))}else{var n="data="+encodeURIComponent(JSON.stringify(this.form));this.sendThreadData(n)}},sendThreadData:function(t){var e=this;u.a.ajax({url:this.server()+"/api/threads/"+this.tid,body:t,method:"POST"},(function(t,n){if(!e.checkResponse(n)){var r=JSON.parse(n).response;e.resetInputForm(),e.$emit("submit-button",r)}}))},resetInputForm:function(){document.getElementById("inputForm").parentElement.style.display="none",this.image="",this.form.images=[];var t=this.$refs.images;t.type="text",t.type="file"}}},l=p,h=(n("ab3f"),n("2877")),m=Object(h["a"])(l,s,o,!1,null,"01e1e476",null),f=m.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Thread"},[n("hr"),t._l(t.posts,(function(e,r){return n("div",{key:e.id},[t.show?0==r||r>t.posts.length-3?n("div",[n("Post",{attrs:{data:e,id:e.id,index:r},on:{"click-on-image":t.clickImageEvent,answer:t.answerEvent}})],1):t._e():n("div",[n("Post",{attrs:{data:e,id:e.id,index:r},on:{"click-on-image":t.clickImageEvent,answer:t.answerEvent}})],1)])}))],2)},g=[],x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.posts,(function(e){return n("div",{key:e.id,staticClass:"popUp",on:{mouseleave:t.clear}},[n("Post",{attrs:{data:e,id:e.id,index:-1},on:{"click-on-image":t.clickImageEvent,answer:t.answerEvent}})],1)})),n("div",{staticClass:"post",attrs:{id:"id"+t.index}},[n("b",[t._v(t._s(t.index)+".")]),t._v(" "+t._s(t.data.email)+": "+t._s(t.data.humanEpoch)+" "),n("a",{attrs:{href:"#"},on:{click:function(e){return t.$emit("answer",t.data)}}},[t._v("â„–"+t._s(t.data.id))]),0==t.index?n("a",{attrs:{href:"#"},on:{click:function(e){return t.$emit("answer",t.data)}}},[t._v("[open]")]):t._e(),n("br"),t._l(t.data.images,(function(e){return n("div",{key:e,staticClass:"images",on:{click:function(n){return t.$emit("click-on-image",t.img_prefix+e)}}},[n("img",{staticClass:"image",attrs:{src:t.thumb_prefix+e,alt:""}})])})),n("p",{staticStyle:{"white-space":"pre-line"},domProps:{innerHTML:t._s(t.data.text)}}),t._l(t.data.responses,(function(e){return n("span",{key:e},[n("a",{attrs:{href:"#"+e},on:{mouseover:function(n){return t.hoverOnResponse(e)}}},[t._v(">>"+t._s(e))])])})),n("div",{staticStyle:{clear:"both"}})],2)],2)},b=[],y=(n("4160"),n("ac1f"),n("5319"),n("159b"),n("8724")),_=n.n(y),w={mixins:[d],components:E,name:"Post",props:["data","index"],data:function(){return{answers:[],posts:[],hrefId:Math.random()}},computed:{thumb_prefix:function(){return this.server()+"/thumb_"},img_prefix:function(){return this.server()+"/"}},methods:{postLookUp:function(t){return t=t.replace(">>",""),t=t.replace("\n",""),this.answers.push(t),'<a id="'+this.hrefId+t+'" href="#'+t+'">>>'+t+"</a>"},clear:function(){this.posts=[]},clickImageEvent:function(t){this.$emit("click-on-image",t)},openThreadEvent:function(t){this.$emit("open-thread",t)},answerEvent:function(t){this.$emit("answer",t)},hoverOnResponse:function(t){var e=this;u.a.ajax({url:this.server()+"/api/posts/"+t,method:"GET"},(function(t,n){e.posts=JSON.parse(n).response}))}},created:function(){var t=this,e=this.data.text.replace(/(^|\s)>>(\w+)/g,(function(e){return t.postLookUp(e)})).replace(/(^|\s)>(.*?)(<br( )*(\/)?( )*>|\n|$)/g,'$1<span class="green">>$2</span>$3');this.data.text=_()(e),this.answers.length},mounted:function(){var t=this;this.answers.forEach((function(e){var n=t.hrefId+e,r=document.getElementById(n);r.addEventListener("mouseover",(function(){u.a.ajax({url:t.server()+"/api/posts/"+e,method:"GET"},(function(e,n){t.posts=JSON.parse(n).response,console.log(t.posts)}))}))}))}},k=w,I=(n("864a"),Object(h["a"])(k,x,b,!1,null,"126f9f47",null)),E=I.exports,O={name:"Thread",mixins:[d],components:{Post:E},props:["tid","show"],data:function(){return{posts:""}},methods:{clickImageEvent:function(t){this.$emit("click-on-image",t)},openThreadEvent:function(t){this.$emit("open-thread",t)},answerEvent:function(t){this.$emit("answer",t)}},mounted:function(){var t=this;u.a.ajax({url:this.server()+"/api/threads/"+this.tid,method:"GET"},(function(e,n){t.posts=JSON.parse(n).response}))}},T=O,$=(n("b485"),Object(h["a"])(T,v,g,!1,null,"6f6b4fcd",null)),j=$.exports,S={name:"app",mixins:[d],components:{InputForm:f,Thread:j},data:function(){return{threads:[],tid:"",bigImg:"",text:"",updKey:1,autoUpd:!1,timer:35}},mounted:function(){var t=this;u.a.ajax({url:this.server()+"/api/threads",method:"GET"},(function(e,n){t.threads=JSON.parse(n).response}))},methods:{openInputForm:function(t){"undefined"!=typeof t.tId?(this.tid=t.tId,this.text=">>"+t.id+"\n"):"new"===t?(this.tid="",this.text=""):this.text="",document.getElementById("hide").style.display="block"},showBigImage:function(t){this.bigImg=t,document.getElementById("hs").style.display="block"},openThread:function(t){this.tid===t&&this.update(),this.tid=t},back:function(){location.reload()},update:function(){this.updKey++,this.timer=35}},watch:{autoUpd:function(){var t=this;this.autoUpd?this.interval=setInterval((function(){t.timer--,t.timer<0&&t.update()}),1e3):(this.timer=35,clearInterval(this.interval))}}},P=S,F=(n("034f"),Object(h["a"])(P,a,i,!1,null,null,null)),U=F.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(U)}}).$mount("#app")},"58e6":function(t,e,n){},"5c1e":function(t,e,n){},"79af":function(t,e,n){},"85ec":function(t,e,n){},"864a":function(t,e,n){"use strict";var r=n("58e6"),a=n.n(r);a.a},ab3f:function(t,e,n){"use strict";var r=n("79af"),a=n.n(r);a.a},b485:function(t,e,n){"use strict";var r=n("5c1e"),a=n.n(r);a.a}});
//# sourceMappingURL=app.af405ee3.js.map